package main

import (
	"encoding/gob"
	"fmt"
	"golang-hacking/P3_malwareServer/core/handleConnection"
	"log"
)

type Data struct {
	Name string
	ID   int
	Age  float32
}

func main() {
	IP := "192.168.10.191"
	Port := "9090"
	connection, err := handleConnection.ConnectWithVictim(IP, Port)
	if err != nil {
		log.Fatal(err)
	}
	defer connection.Close()
	fmt.Println("[+] Connection established with ", connection.RemoteAddr().String())

	data := &Data{
		Name: "John Smith\nJoohn doe",
		ID:   50,
		Age:  50.43,
	}

	encoder := gob.NewEncoder(connection)

	err = encoder.Encode(data)
	if err != nil {
		log.Fatal(err)
	} else {
		fmt.Println("[+] Data sent successfully")
	}
}
